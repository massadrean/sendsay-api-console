(this["webpackJsonpsendsay-api-console"]=this["webpackJsonpsendsay-api-console"]||[]).push([[3],{12:function(e,t,n){"use strict";var a=n(39),r=new(n.n(a).a);t.a=r},24:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return f}));var a=n(14),r=n.n(a),c=n(25),o=n(5),s=n(12),u=function(e){return{type:o.e,userData:e}},i=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){var a,c,o,i,l;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.login,c=e.sublogin,o=e.password,t.next=3,s.a.request({action:"login",login:a,sublogin:c,passwd:o});case 3:i=t.sent,l={session:i.session,login:i.login},c&&(l.sublogin=c),s.a.setSession(i.session),n(u(l));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},l=function(e){return function(){var t=Object(c.a)(r.a.mark((function t(n){return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s.a.setSession(e),t.next=3,s.a.request({action:"pong"});case 3:n(u({}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},f=function(){return s.a.request({action:"logout"}),{type:o.h}}},40:function(e,t,n){e.exports=n(63)},5:function(e,t,n){"use strict";n.d(t,"e",(function(){return a})),n.d(t,"h",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"g",(function(){return i})),n.d(t,"f",(function(){return l}));var a="SESSION_RECEIVED",r="USER_LOGOUT",c="MAKE_SENDSAY_REQUEST",o="RECEIVE_SENDSAY_RESPONSE",s="REMOVE_REQUEST_FROM_HISTORY",u="CLEAR_REQUEST_HISTORY",i="SET_CONSOLE_RATIO",l="SET_CONSOLE_INPUT_VALUE"},59:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(17),o=n.n(c),s=n(13),u=n(9),i=n(10),l=n(36),f=n(37),d=n(38),b=n.n(d),p=n(5),E=n(3),O={login:"",sublogin:"",session:""};var h=n(34),m={isFetching:!1,isServerError:!1,ratio:[50,50],inputValue:"",outputValue:void 0,requests:[]},g=Object(i.combineReducers)({userData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case p.e:return Object(E.a)(Object(E.a)({},e),t.userData);default:return e}},console:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case p.b:return Object(E.a)(Object(E.a)({},e),{},{isFetching:!0});case p.c:var n={action:t.payload.action,body:t.payload.body,successful:t.payload.successful},a=Object(h.a)(e.requests).filter((function(e){return e.body!==t.payload.body}));return a.unshift(n)>15&&a.pop(),Object(E.a)(Object(E.a)({},e),{},{isFetching:!1,isServerError:!t.payload.successful,outputValue:t.payload.response,requests:a});case p.d:return Object(E.a)(Object(E.a)({},e),{},{requests:e.requests.filter((function(e){return e.body!==t.requestBody}))});case p.a:return Object(E.a)(Object(E.a)({},e),{},{requests:[]});case p.g:return Object(E.a)(Object(E.a)({},e),{},{ratio:t.ratio});case p.f:return Object(E.a)(Object(E.a)({},e),{},{inputValue:t.value});default:return e}}}),v=function(){try{var e=localStorage.getItem("state");if(!e)return;return JSON.parse(e)}catch(t){return}}(),S=Object(i.createStore)((function(e,t){return t.type===p.h&&(e=void 0),g(e,t)}),v,Object(l.composeWithDevTools)(Object(i.applyMiddleware)(f.a)));S.subscribe(b()((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(n){}}({userData:S.getState().userData,console:{ratio:S.getState().console.ratio,requests:S.getState().console.requests}})})),1e3);var j=S,y=(n(58),n(59),n(29)),w=n(2),A=n(24),_=n(18);var R=Object(u.b)((function(e){return{isAuthenticated:!!e.userData.session}}))((function(e){var t=e.isAuthenticated,n=e.component,a=Object(_.a)(e,["isAuthenticated","component"]);return r.a.createElement(w.b,Object.assign({},a,{render:function(e){return t?r.a.createElement(w.a,{to:"/console"}):r.a.createElement(n,e)}}))}));var T=Object(u.b)((function(e){return{isAuthenticated:!!e.userData.session}}))((function(e){var t=e.isAuthenticated,n=e.component,a=Object(_.a)(e,["isAuthenticated","component"]);return r.a.createElement(w.b,Object.assign({},a,{render:function(e){return t?r.a.createElement(n,e):r.a.createElement(w.a,{to:"/login"})}}))})),q=(n(62),r.a.lazy((function(){return Promise.all([n.e(0),n.e(2)]).then(n.bind(null,628))}))),D=r.a.lazy((function(){return Promise.all([n.e(0),n.e(5),n.e(1)]).then(n.bind(null,626))}));var N=Object(u.b)((function(e){return{session:e.userData.session}}),(function(e){return{checkSessionThunkAction:function(t){return e(Object(A.a)(t))},logoutAction:function(){e(Object(A.c)())}}}))((function(e){var t=e.session,n=e.checkSessionThunkAction,c=e.logoutAction,o=Object(a.useState)(!1),s=Object(y.a)(o,2),u=s[0],i=s[1];return Object(a.useEffect)((function(){t&&(i(!0),n(t).catch((function(){c()})).finally((function(){i(!1)})))}),[n,t,c]),r.a.createElement("div",{className:"App"},u?r.a.createElement("div",{className:"preloader"}):r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",{className:"preloader"})},r.a.createElement(w.d,null,r.a.createElement(R,{path:"/login",exact:!0,component:q}),r.a.createElement(T,{path:"/console",exact:!0,component:D}),r.a.createElement(w.b,{path:"*"},t?r.a.createElement(w.a,{to:"/console"}):r.a.createElement(w.a,{to:"/login"})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(s.a,{basename:"/sendsay-api-console"},r.a.createElement(u.a,{store:j},r.a.createElement(N,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[40,4,6]]]);
//# sourceMappingURL=main.7ca4ff33.chunk.js.map